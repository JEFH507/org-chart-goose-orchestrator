# Phase 0 CE Compose env (local-only). Copy to .env.ce and edit as needed.
# Do not commit deploy/compose/.env.ce

# Core ports
KEYCLOAK_PORT=8080
VAULT_PORT=8200
POSTGRES_PORT=5432
OLLAMA_PORT=11434

# Optional S3-compatible storage (OFF by default)
S3_PROVIDER=off # off|seaweedfs|minio|garage
SEAWEED_S3_PORT=8333
SEAWEED_MASTER_PORT=9333
SEAWEED_FILER_PORT=8081
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001

# Feature toggles
ALLOW_DISABLE_OLLAMA=true

# Controller (Phase 1+)
CONTROLLER_PORT=8088
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/orchestrator

# OIDC (Keycloak dev) - Phase 1.2
OIDC_ISSUER_URL=http://keycloak:8080/realms/dev
OIDC_JWKS_URL=http://keycloak:8080/realms/dev/protocol/openid-connect/certs
OIDC_AUDIENCE=goose-controller
OIDC_CLIENT_SECRET=CHANGE_ME_GET_FROM_KEYCLOAK_UI

# Pseudonymization (optional for logging/IDs) - Phase 1.2
# PSEUDO_SALT is typically read from Vault then exported here for local runs
# DO NOT commit actual values; this is for documentation only
PSEUDO_SALT=CHANGE_ME_DEV_ONLY

# Privacy Guard (Phase 2) - PII Detection and Masking
GUARD_PORT=8089
GUARD_MODE=MASK           # OFF|DETECT|MASK|STRICT
GUARD_CONFIDENCE=MEDIUM   # HIGH|MEDIUM|LOW
GUARD_LOG_LEVEL=info      # error|warn|info|debug|trace

# Privacy Guard Model-Enhanced Detection (Phase 2.2)
GUARD_MODEL_ENABLED=true  # true|false - NER model for improved PII detection (enabled by default)
                          # Set to false for Phase 2 regex-only performance (P50=16ms)
OLLAMA_URL=http://ollama:11434  # Ollama service URL (internal Docker network)
OLLAMA_MODEL=qwen3:0.6b   # NER model: qwen3:0.6b (recommended), gemma3:1b, phi4:3.8b-mini (post-MVP)

# Controller Guard Integration (Phase 2)
GUARD_ENABLED=false       # true|false - Enable privacy guard integration in controller
GUARD_URL=http://privacy-guard:8089  # Privacy guard service URL

# Redis Configuration (Phase 4)
REDIS_PORT=6379           # Redis port
REDIS_URL=redis://redis:6379  # Redis connection URL (internal Docker network)

# Idempotency Deduplication (Phase 4)
IDEMPOTENCY_ENABLED=false # true|false - Enable idempotency key deduplication
IDEMPOTENCY_TTL_SECONDS=86400  # 24 hours - TTL for cached idempotency responses