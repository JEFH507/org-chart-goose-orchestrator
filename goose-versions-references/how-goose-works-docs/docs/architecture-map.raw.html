<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Goose Architecture Map</title>
<style>
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial, sans-serif; margin: 28px; color: #222; }
  h1,h2 { margin: 0.4em 0; }
  .grid { display: grid; grid-template-columns: 1fr; gap: 18px; }
  .diag { border: 1px solid #ddd; padding: 10px; border-radius: 8px; }
  img { max-width: 100%; height: auto; }
  ul { margin-top: 6px; }
  .small { font-size: 0.95em; }
  .meta { color: #666; font-size: 0.9em; }
</style>
</head>
<body>
  <h1>Goose Architecture Map</h1>
  <p class="meta">One-page reference of Goose components, relationships, and flows.</p>

  <h2>System Architecture</h2>
  <div class="diag"><img src="../diagrams/mermaid/system_architecture.png" alt="System Architecture"></div>

  <h2>Agent Engine Modules</h2>
  <div class="diag"><img src="../diagrams/mermaid/agent_engine_modules.png" alt="Agent Engine Modules"></div>

  <h2>Interactive Loop</h2>
  <div class="diag"><img src="../diagrams/mermaid/interactive_loop.png" alt="Interactive Loop"></div>

  <h2>Key Components</h2>
  <div class="small">
  <ul>
    <li><strong>Interface</strong>: Desktop (Electron), CLI, ACP clients</li>
    <li><strong>Server</strong>: goose-server (goosed), OpenAPI consumed by UI</li>
    <li><strong>Agent Engine</strong>: core loop, tool routing, providers, prompts, context, permissions, security, scheduler, logging</li>
    <li><strong>Extensions</strong>: MCP-based built-in and external servers exposing tools</li>
    <li><strong>Scheduler</strong>: temporal-service (Go) with agent-side scheduler modules</li>
    <li><strong>Config</strong>: ~/.config/goose/config.yaml and environment variables</li>
    <li><strong>Logs & Storage</strong>: history.txt, sessions/*.jsonl, cli/server logs</li>
    <li><strong>Security</strong>: permission modes, per-tool permissions, prompt-injection detection</li>
    <li><strong>Error Handling</strong>: surfaces tool errors to LLM for self-recovery</li>
  </ul>
  </div>
</body>
</html>
